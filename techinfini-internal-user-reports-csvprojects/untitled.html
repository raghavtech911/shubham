<!DOCTYPE html>
<html>
<head>
	<title>Reports</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
	<script
  src="https://code.jquery.com/jquery-3.2.1.js"
  integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE="
  crossorigin="anonymous"></script>
</head>
<body>
<div class="container"> 
	<form method="POST" action="" >
	<div>
		<label>Start Date</label> <input id="startdate" type="date" name="startdate" value="2017-09-07">
		<label>End Date</label><input id="enddate" type="date" name="enddate" value="2017-10-14">
	</div>
	<div style="float:right;">
	<label>Select Format</label>
		<select name="format_select" >
			<option value="none">None</option>
			<option value="week">Weekly</option>
			<option value="month">Monthly</option>
		</select>
	</div>
	<input name="submit" type="submit" value="GO!"> 
	</form>
</div>

<?php
$con = mysqli_connect("localhost","root","","csv_db");
if (mysqli_connect_errno())
  	{
  		echo "Failed to connect to MySQL: " . mysqli_connect_error();
	}

if(isset($_POST['submit'])){
	$start_date = $_POST['startdate'];
	$end_date = $_POST['enddate'];
	$format = $_POST['format_select'];

	#-------------------------------------------FOR NONE -----------------------------

	if($_POST['format_select'] == 'none'){
		 $sql = "SELECT id, project, user_name, date,client, type , SUM(Left(time,2) * 3600 + substring(time, 4,2) * 60 )AS time FROM csv_info WHERE date>= '".$start_date."' AND date<= '".$end_date."' GROUP BY project";
		 
		 if ($result = mysqli_query($con, $sql)){
		 	echo "
		 	<hr />
		 	<div class='container'>
		 	<span id='dates'>";
		 	echo " From ";
		 	echo "".$start_date.""; 
		 	echo "  To  ";
		 	echo "".$end_date."</span>";

		 	echo "
		 	<table width='50%' class='table table-bordered'>
		 	<tr>
		 	<th>More</th>
		 	<th>Project name</th>
			<th>Total Time</th>
			</tr>";

  while ($row = mysqli_fetch_assoc($result))
    {
		  echo "<tr>";
		  echo "<td> <input type='button' value='Show more' name='show more' id='show_more' data-project='".$row['project']."'> </td>";
		  echo "<td>" . $row['project'] . "</td>";
		  	$seconds = $row['time'];
			$H = floor($seconds / 3600);
			$i = ($seconds / 60) % 60;
			$time = sprintf("%02d:%02d", $H, $i);
		  echo "<td>" . $time . " Hr</td>";
		  echo "</tr>";

		echo "<tr class='slidedown'>";
		  $query = "SELECT * FROM csv_info WHERE project='".$row['project']."'";
		  if ($res = mysqli_query($con, $query)){
					while ($r = mysqli_fetch_assoc($res)){
						echo "<td><table> ";
							echo " User: " . $r['user_name']." <br> " . "Type: " . $r['type']."<br> Time " .$r['time']."<br> Date: ".$r['date'];
						echo "</table></td>";
				}	  	
		  }
		  		echo "</tr>";

    }
     echo "</table>";
  ?>
  <?php
  	echo "</div>";
 	}

	   }

#--------------------------------------------- FOR WEEKLY--------------------------------

	if($_POST['format_select'] == 'week'){
		echo "week";
	}

#----------------------------------------------FOR MONTHLY --------------------------------------

	if($_POST['format_select'] == 'month'){
		$d = date_parse_from_format("Y-m-d", $start_date);
		$start_month = $d["month"];

		$d = date_parse_from_format("Y-m-d", $end_date);
		$end_month = $d["month"];

			?>
			 <!--  <div style=" width: 50%; margin: 0 auto;">
			 <label>Select month:</label>
			 <select id="select_month"> -->
			 <?php
			// for($i = $start_month; $i<=$end_month; $i++){
			// 	$dateObj   = DateTime::createFromFormat('!m', $i);
			// 	$monthName = $dateObj->format('M');
			// 	$monthNameFull = $dateObj->format('F');
			// ?>
			 <!-- <option value="<?php //echo $monthName; ?>"> <?php //echo $monthNameFull ?></option> -->
			<?php 
		//}
		?>
			</select>
			</div>
			<?php
			

		for($i = $start_month; $i<=$end_month; $i++){
			$sql = "SELECT id, project, user_name, date, client, type ,SUM(Left(time,2) * 3600 + substring(time, 4,2) * 60 ) AS time FROM csv_info WHERE date>= '".$start_date."' AND date<= '".$end_date."'AND month(date) = '".$i."'GROUP BY project, month(date)";

			$dateObj   = DateTime::createFromFormat('!m', $i);
			$monthName = $dateObj->format('M');
			$monthNameFull = $dateObj->format('F');

			if ($result = mysqli_query($con, $sql)){
			echo "
			<div class='container ".$monthName." hidethis '>";
			echo " From ";
			echo $start_date; 
			echo "  To  ";
			echo $end_date;

			
			//echo "<div style='background-color: aquamarine;'><h2 style='text-align:center;'>Data For ".$monthNameFull." </h2></div>";

			echo "
			<table border='1' width='50%' class='table table-bordered'>
			<tr>
			<th>More</th>
			<th>Id</th>
			<th>Project name</th>
			<th>".$monthName."</th>
			</tr>";

  while ($row = mysqli_fetch_assoc($result))
    {
		  echo "<tr>";
		  echo "<td> <input type='button' value='Show more' name='show_more' id='show_more'> </td>";
		  echo "<td>" . $row['id'] . "</td>";
		  echo "<td>" . $row['project'] . "</td>";
		  // echo "<td>" . $row['date'] . "</td>";
		  $sec = $row['time'];
		  $HH = floor($sec / 3600);
		  $ii = ($sec / 60) % 60;
		  $tm = sprintf("%02d:%02d", $HH, $ii);
		  echo "<td>" . $tm . " Hr</td>";

		  echo "</tr>";
		echo "<tr class='slidedown'>";
		  $query = "SELECT * FROM csv_info WHERE project='".$row['project']."'";
		  if ($res = mysqli_query($con, $query)){
					while ($r = mysqli_fetch_assoc($res)){
						echo "<td><table> ";
							echo " User: " . $r['user_name']." Client: " . $r['client'] . "Type: " . $r['type']." Time " .$r['time'];
						echo "</table></td> ";
				}	  	
		  }
		  			echo "</tr>";

    }
    echo "</table>";
  ?>
	  <input type="submit" name="export" value="Export">
  <?php
  	echo "</div>";
	 		}
	 	}
	}
}

?>
	</body>
</html>

<script type="text/javascript">
	$(function(){
		var data_get={};
		$('.slidedown').hide();
		// $('.hidethis').hide();
		// var monthtoshow = $('#select_month').val();

		// $('.'+monthtoshow).show();
		// $('#select_month').on('change', function() {
  // 			 $('.hidethis').hide();
  // 			 $("."+this.value).show();

		// 	})

		$(document).on("click", "#show_more", function(){
			var project_name = $(this).attr("data-project");

			$.ajax({
				type: 'POST',
				url:"ajax.php",
				data: {data: project_name},

				success: function(data)         
  				{
  					var data_get = JSON.parse(data);
  					console.log(data_get[0]['id']);
  				}
			});

			$(this).parent().parent().next('tr').slideToggle('fast');
		});
	});
</script>




SELECT id, task_id, project, month(date) AS month, user_name, date, client, type ,SUM(Left(time,2) * 3600 + substring(time, 4,2) * 60 ) AS time FROM csv_info WHERE date>= '17-09-07' AND date<= '2017-10-14' GROUP BY  project, month(date)




$sql = "SELECT * FROM( SELECT id, project, user_name, date, month(date) AS month,client, type ,SUM(Left(time,2) * 3600 + substring(time, 4,2) * 60 ) AS time FROM csv_info WHERE date>= '".$start_date."' AND date<= '".$end_date."'GROUP BY project, month(date)) as data GROUP BY project ";
	 	



	 	SELECT project, 
	SUM(IF(MONTH(date) = 9, time, 0))AS sept,
    SUM(IF(MONTH(date) = 10, time, 0))AS oct,
    SUM(time)AS total
    FROM csv_info 
    WHERE date>= '17-09-07' AND date<= '2017-10-14'
    GROUP BY project




    SELECT project,
	SUM(IF(MONTH(date) = 1, Left(time,2) * 3600 + substring(time, 4,2) * 60, 0))AS jan,
    SUM(IF(MONTH(date) = 2, time, 0))AS feb,
    SUM(IF(MONTH(date) = 3, time, 0))AS march,
    SUM(IF(MONTH(date) = 4, time, 0))AS april,
    SUM(IF(MONTH(date) = 5, time, 0))AS may,
    SUM(IF(MONTH(date) = 6, time, 0))AS june,
    SUM(IF(MONTH(date) = 7, time, 0))AS july,
    SUM(IF(MONTH(date) = 8, time, 0))AS aug,
	SUM(IF(MONTH(date) = 9, Left(time,2) * 3600 + substring(time, 4,2) * 60, 0))AS sept,
    SUM(IF(MONTH(date) = 10, Left(time,2) * 3600 + substring(time, 4,2) * 60, 0))AS oct,
    SUM(IF(MONTH(date) = 11, time, 0))AS nov,
    SUM(IF(MONTH(date) = 12, time, 0))AS december,
    SUM(Left(time,2) * 3600 + substring(time, 4,2) * 60)AS total
    FROM csv_info 
    WHERE date>= '17-09-07' AND date<= '2017-10-14'
    GROUP BY project

//////////////////////



    SELECT  
project,
WEEK(date) week,
        sum(time) as totaltime,
 CONCAT(DATE_FORMAT(DATE_ADD(date, INTERVAL(1-DAYOFWEEK(date)) DAY),'%Y-%m-%e'), ' TO ',    
 DATE_FORMAT(DATE_ADD(date, INTERVAL(7-DAYOFWEEK(date)) DAY),'%Y-%m-%e')) AS DateRange
FROM csv_info 
WHERE date>= '17-09-01' AND date<= '2017-10-30'
GROUP BY project
order by date



SELECT 
	project,
  	MAX(IF(WEEK(date)= 35, Left(time,2) * 3600 + substring(time, 4,2) * 60,0))AS week35,
    MAX(IF(WEEK(date)= 36, Left(time,2) * 3600 + substring(time, 4,2) * 60,0)) AS week36,
    sum(Left(time,2) * 3600 + substring(time, 4,2) * 60) as totaltime
		    FROM csv_info 
		   	WHERE date>= '17-09-01' AND date<= '2017-10-30'
		    GROUP BY project
		    ORDER BY date

SET @sql = NULL;
    SELECT
      GROUP_CONCAT(DISTINCT
        CONCAT(
          'MAX(IF(WEEK(date) = '
            , WEEK(date)
            , ',time,0)) AS mo_',WEEK(date)
        )
      )INTO @sql
    FROM csv_info;
    
   SET @sql = CONCAT('SELECT project, ', 
		@sql, ' 
	FROM csv_info WHERE date>= "17-09-01" AND date<= "2017-10-30"
	GROUP BY project'
);

/*
PREPARE st FROM @sql;
EXECUTE st;
DEALLOCATE PREPARE st;
*/

SELECT @sql;













<!DOCTYPE html>
<html>
<head>
	<title>Reports</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
	<script
  src="https://code.jquery.com/jquery-3.2.1.js"
  integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE="
  crossorigin="anonymous"></script>
  <style type="text/css">
  	.shubh{
  		color:red;
  	}
  	
  	.shubh{
   display: none;
	}
  </style>
</head>
<body>
<div class="container"> 
	<form method="POST" action="" >
	<div>
		<label>Start Date</label> <input id="startdate" type="date" name="startdate" value="2017-09-01">
		<label>End Date</label><input id="enddate" type="date" name="enddate" value="2017-10-31">
	</div>
	<div style="float:right;">
	<label>Select Format</label>
		<select name="format_select" >
			<option value="none">None</option>
			<option value="week">Weekly</option>
			<option value="month">Monthly</option>
		</select>
	</div>
	<input name="submit" type="submit" value="GO!"> 
	</form>
</div>

<?php
$con = mysqli_connect("localhost","root","","csv_db");
if (mysqli_connect_errno())
  	{
  		echo "Failed to connect to MySQL: " . mysqli_connect_error();
	}

if(isset($_POST['submit'])){
	$start_date = $_POST['startdate'];
	$end_date = $_POST['enddate'];
	$format = $_POST['format_select'];

	#-------------------------------------------FOR NONE -----------------------------

	if($_POST['format_select'] == 'none'){
		 $sql = "SELECT id, project, user_name, date,client, type , SUM(Left(time,2) * 3600 + substring(time, 4,2) * 60 )AS time FROM csv_info WHERE date>= '".$start_date."' AND date<= '".$end_date."' GROUP BY project";
		 
		 if ($result = mysqli_query($con, $sql)){
		 	echo "
		 	<hr />
		 	<div class='container'>
		 	<span id='dates'>";
		 	echo " From ";
		 	echo "".$start_date.""; 
		 	echo "  To  ";
		 	echo "".$end_date."</span>";

		 	echo "
		 	<table width='50%' class='table table-bordered'>
		 	<tr>
		 	<th>More</th>
		 	<th>ID</th>
		 	<th>Project name</th>
			<th>Total Time <small>In hours</small></th>
			</tr>";

  while ($row = mysqli_fetch_assoc($result))
    {
		  echo "<tr>";
		  echo "<td> <input type='button' value='Show more' name='show more' id='show_more' data-project='".$row['project']."'> </td>";
		  echo "<td>".$row['id']."</td>";
		  echo "<td>" . $row['project'] . "</td>";
		  	$seconds = $row['time'];
			$H = floor($seconds / 3600);
			$i = ($seconds / 60) % 60;
			$time = sprintf("%02d:%02d", $H, $i);
		  echo "<td>" . $time . "</td>";
		  echo "</tr>";

		echo "<tr class='slidedown'>";
		  $query = "SELECT * FROM csv_info WHERE project='".$row['project']."'AND date>= '".$start_date."' AND date<= '".$end_date."'";
		  if ($res = mysqli_query($con, $query)){
		  	echo "<td colspan='4'><table width='1100' bgcolor='#c0edea'>";
		  	echo "<tr bgcolor='#6b98e0'>
		 	<th>User</th>
		 	<th>Type</th>
		 	<th>Time</th>
		 	<th>Date</th>
		 	</tr>";
					while ($r = mysqli_fetch_assoc($res)){
						echo "<tr>";
						echo "<td>".$r['user_name']."</td>";
						echo "<td>".$r['type']."</td>";
						echo "<td>".$r['time']."</td>";
						echo "<td>".$r['date']."</td>";
						echo "</tr>";
				}	  	
				echo "</table></td>";
		  }
		  		echo "</tr>";

    }
     echo "</table>";
  ?>
  <?php
  	echo "</div>";
 	}

	   }

#--------------------------------------------- FOR WEEKLY--------------------------------

	if($_POST['format_select'] == 'week'){
		$d = date_parse_from_format("Y-m-d", $start_date);
		$start_month = $d["month"];

		$d = date_parse_from_format("Y-m-d", $end_date);
		$end_month = $d["month"];

		// $sql= "SELECT 
		// 	project, CONCAT('week ',WEEK(date)) weeks,
		//     sum(Left(time,2) * 3600 + substring(time, 4,2) * 60) as totaltime 
		//     FROM csv_info 
		//    	WHERE date>= '".$start_date."' AND date<= '".$end_date."'
		//     GROUP BY project
		//     ORDER BY date";

		$sql= "SELECT 
	project,
  	MAX(IF(WEEK(date)= 35, Left(time,2) * 3600 + substring(time, 4,2) * 60,0)) AS week35,
    MAX(IF(WEEK(date)= 36, Left(time,2) * 3600 + substring(time, 4,2) * 60,0)) AS week36,
    MAX(IF(WEEK(date)= 10, Left(time,2) * 3600 + substring(time, 4,2) * 60,0)) AS week10,
    MAX(IF(WEEK(date)= 11, Left(time,2) * 3600 + substring(time, 4,2) * 60,0)) AS week11,
    MAX(IF(WEEK(date)= 12, Left(time,2) * 3600 + substring(time, 4,2) * 60,0)) AS week12,
    MAX(IF(WEEK(date)= 13, Left(time,2) * 3600 + substring(time, 4,2) * 60,0)) AS week13,
    MAX(IF(WEEK(date)= 14, Left(time,2) * 3600 + substring(time, 4,2) * 60,0)) AS week14,
    MAX(IF(WEEK(date)= 15, Left(time,2) * 3600 + substring(time, 4,2) * 60,0)) AS week15,
    MAX(IF(WEEK(date)= 16, Left(time,2) * 3600 + substring(time, 4,2) * 60,0)) AS week16,
    MAX(IF(WEEK(date)= 17, Left(time,2) * 3600 + substring(time, 4,2) * 60,0)) AS week17,
    MAX(IF(WEEK(date)= 18, Left(time,2) * 3600 + substring(time, 4,2) * 60,0)) AS week18,
    MAX(IF(WEEK(date)= 19, Left(time,2) * 3600 + substring(time, 4,2) * 60,0)) AS week19,
    MAX(IF(WEEK(date)= 20, Left(time,2) * 3600 + substring(time, 4,2) * 60,0)) AS week20,

    sum(Left(time,2) * 3600 + substring(time, 4,2) * 60) as totaltime
		    FROM csv_info 
		   	WHERE date>= '17-09-01' AND date<= '2017-10-30'
		    GROUP BY project
		    ORDER BY date";


		 if ($result = mysqli_query($con, $sql)){
			echo "
			<hr />
		 	<div class='container'>
		 	<span id='dates'> From ";
			echo $start_date; 
			echo "  To  ";
			echo $end_date;
			
		/*	echo "<table width='50%' class='table table-bordered'><tr> <th>Project</th> <th>Week</th> <th>Time</th> </tr>";

			while ($row = mysqli_fetch_assoc($result)){
						echo '<tr>';
						 // echo "<pre>".print_r($row)." </pre>";
						 echo "<td>" . $row['project'] . " </td>";
						 echo "<td>" . $row['weeks'] . " </td>";

						 $HH = floor($row['totaltime'] / 3600);
							$ii = ($row['totaltime'] / 60) % 60;
							$time = sprintf("%02d:%02d", $HH, $ii);
						 echo "<td>" . $time . " Hr</td>";
						echo '</tr>';

						}
						echo "</table>";*/



echo "<table width='50%' class='table table-bordered'><tr> <th>Project</th> 
		<th>Week35</th> 
		<th>Week36</th> 
		<th class='week10'>Week10</th> 
		<th>Week11</th>
		<th>Week12</th>
		<th>Week13</th>
		<th>Week14</th>
		<th>Week15</th>
		<th>Week16</th>
		<th>Week17</th>
		<th>Week18</th>
		<th>Week19</th>
		<th>Week20</th>
		 </tr>";

			while ($row = mysqli_fetch_assoc($result)){
						echo '<tr>';
						 // echo "<pre>".print_r($row)." </pre>";
						 echo "<td>" . $row['project'] . " </td>";
						 echo "<td>" . $row['week35'] . " </td>";
						 echo "<td>" . $row['week36'] . " </td>";
					if($row['week10']==0){echo "<td class='week10'></td>" ;}else{echo "<td>" . $row['week10'] . " </td>";}  
					if($row['week11']==0){ }else{echo "<td>" . $row['week11'] . " </td>";}  
					if($row['week12']==0){ }else{echo "<td>" . $row['week12'] . " </td>";}  
					if($row['week13']==0){ }else{echo "<td>" . $row['week13'] . " </td>";}  
					if($row['week14']==0){ }else{echo "<td>" . $row['week14'] . " </td>";}  
					if($row['week15']==0){ }else{echo "<td>" . $row['week15'] . " </td>";}  
					if($row['week16']==0){ }else{echo "<td>" . $row['week16'] . " </td>";}  
					if($row['week17']==0){ }else{echo "<td>" . $row['week17'] . " </td>";}  
					if($row['week18']==0){ }else{echo "<td>" . $row['week18'] . " </td>";}  
					if($row['week19']==0){ }else{echo "<td>" . $row['week19'] . " </td>";}  
					if($row['week20']==0){ }else{echo "<td>" . $row['week20'] . " </td>";}  

						echo '</tr>';
						}
						echo "</table>";
#..........................

		}
	}

#----------------------------------------------FOR MONTHLY --------------------------------------

	if($_POST['format_select'] == 'month'){
		$d = date_parse_from_format("Y-m-d", $start_date);
		$start_month = $d["month"];

		$d = date_parse_from_format("Y-m-d", $end_date);
		$end_month = $d["month"];

	 	 $sql = "SELECT project,
					SUM(IF(MONTH(date) = 1, Left(time,2) * 3600 + substring(time, 4,2) * 60, 0))AS jan,
				    SUM(IF(MONTH(date) = 2, Left(time,2) * 3600 + substring(time, 4,2) * 60, 0))AS feb,
				    SUM(IF(MONTH(date) = 3, Left(time,2) * 3600 + substring(time, 4,2) * 60, 0))AS mar,
				    SUM(IF(MONTH(date) = 4, Left(time,2) * 3600 + substring(time, 4,2) * 60, 0))AS april,
				    SUM(IF(MONTH(date) = 5, Left(time,2) * 3600 + substring(time, 4,2) * 60, 0))AS may,
				    SUM(IF(MONTH(date) = 6, Left(time,2) * 3600 + substring(time, 4,2) * 60, 0))AS jun,
				    SUM(IF(MONTH(date) = 7, Left(time,2) * 3600 + substring(time, 4,2) * 60, 0))AS jul,
				    SUM(IF(MONTH(date) = 8, Left(time,2) * 3600 + substring(time, 4,2) * 60, 0))AS aug,
					SUM(IF(MONTH(date) = 9, Left(time,2) * 3600 + substring(time, 4,2) * 60, 0))AS sept,
				    SUM(IF(MONTH(date) = 10, Left(time,2) * 3600 + substring(time, 4,2) * 60, 0))AS oct,
				    SUM(IF(MONTH(date) = 11, Left(time,2) * 3600 + substring(time, 4,2) * 60, 0))AS nov,
				    SUM(IF(MONTH(date) = 12, Left(time,2) * 3600 + substring(time, 4,2) * 60, 0))AS december,
				    SUM(Left(time,2) * 3600 + substring(time, 4,2) * 60)AS total
				    FROM csv_info 
				    WHERE date>= '".$start_date."' AND date<= '".$end_date."'
				    GROUP BY project";

				    if ($result = mysqli_query($con, $sql)){
				    	echo "<div class='container-fluid'>";
				    	echo " From ";
						echo $start_date; 
						echo "  To  ";
						echo $end_date;

				    	echo "
							<table border='1' width='50%' class='table table-bordered'>
							<tr bgcolor='#d5efef'>
							<th>More</th>
							<th>Project</th>
							<th>Jan <br><small>In hours</small></th>
							<th>Feb <br><small>In hours</small></th>
							<th>Mar <br><small>In hours</small></th>
							<th>April <br><small>In hours</small></th>
							<th>May <br><small>In hours</small></th>
							<th>Jun <br><small>In hours</small></th>
							<th>Jul <br><small>In hours</small></th>
							<th>Aug <br><small>In hours</small></th>
							<th>Sept <br><small>In hours</small></th>
							<th>Oct <br><small>In hours</small></th>
							<th>Nov <br><small>In hours</small></th>
							<th>Des <br><small>In hours</small></th>
							<th>Total <br><small>In hours</small></th>
							</tr>";

				    	while ($row = mysqli_fetch_assoc($result)){
				    		// echo "<pre>".print_r($row)." </pre>";
				    		echo '<tr>';
				    		echo "<td> <input type='button' value='Show more' name='show_more' id='show_more'> </td>";
		  					echo "<td>" . $row['project'] . "</td>";

		  					$HH = floor($row['jan'] / 3600);
							$ii = ($row['jan'] / 60) % 60;
							$jan = sprintf("%02d:%02d", $HH, $ii);
		  					echo "<td>" . $jan . " </td>";

		  					$seconds = $row['feb'];
							$H = floor($seconds / 3600);
							$i = ($seconds / 60) % 60;
							$feb = sprintf("%02d:%02d", $H, $i);
		  					echo "<td>" . $feb . "</td>";

		  					$seconds = $row['mar'];
							$H = floor($seconds / 3600);
							$i = ($seconds / 60) % 60;
							$mar = sprintf("%02d:%02d", $H, $i);
		  					echo "<td>" . $mar . "</td>";

		  					$seconds = $row['april'];
							$H = floor($seconds / 3600);
							$i = ($seconds / 60) % 60;
							$ap = sprintf("%02d:%02d", $H, $i);
		  					echo "<td>" . $ap . "</td>";

		  					$seconds = $row['may'];
							$H = floor($seconds / 3600);
							$i = ($seconds / 60) % 60;
							$may = sprintf("%02d:%02d", $H, $i);
		  					echo "<td>" . $may . "</td>";

		  					$seconds = $row['jun'];
							$H = floor($seconds / 3600);
							$i = ($seconds / 60) % 60;
							$jun = sprintf("%02d:%02d", $H, $i);
		  					echo "<td>" . $jun . " </td>";

		  					$seconds = $row['jul'];
							$H = floor($seconds / 3600);
							$i = ($seconds / 60) % 60;
							$jul = sprintf("%02d:%02d", $H, $i);
		  					echo "<td>" . $jul . "</td>";

		  					$seconds = $row['aug'];
							$H = floor($seconds / 3600);
							$i = ($seconds / 60) % 60;
							$aug = sprintf("%02d:%02d", $H, $i);
		  					echo "<td>" . $aug . " </td>";

		  					$HH = floor($row['sept'] / 3600);
							$ii = ($row['sept'] / 60) % 60;
							$sept = sprintf("%02d:%02d", $HH, $ii);
		  					echo "<td>" . $sept . " </td>";

							$seconds = $row['oct'];
							$H = floor($seconds / 3600);
							$i = ($seconds / 60) % 60;
							$oct = sprintf("%02d:%02d", $H, $i);		  					
		  					echo "<td>" . $oct . "</td>";

		  					$seconds = $row['nov'];
							$H = floor($seconds / 3600);
							$i = ($seconds / 60) % 60;
							$nov = sprintf("%02d:%02d", $H, $i);
		  					echo "<td>" . $nov . "</td>";

		  					$seconds = $row['december'];
							$H = floor($seconds / 3600);
							$i = ($seconds / 60) % 60;
							$december = sprintf("%02d:%02d", $H, $i);
		  					echo "<td>" . $december . " </td>";

							$HH = floor($row['total'] / 3600);
							$ii = ($row['total'] / 60) % 60;
							$tm = sprintf("%02d:%02d", $HH, $ii);
							echo "<td>" . $tm . "</td>";
							echo "</tr>";

						echo "<tr class='slidedown'>";
						$query = "SELECT * FROM csv_info WHERE project='".$row['project']."'AND date>= '".$start_date."' AND date<= '".$end_date."'";
						if ($res = mysqli_query($con, $query)){
							echo "<td colspan='15'><table  width='1570' bgcolor='#c0edea'>";
		  					echo "<tr bgcolor='#6b98e0'> <th>Date</th> <th>User</th> <th>Type</th> <th>Time <small> in Hr</small></th> </tr>";
									while ($r = mysqli_fetch_assoc($res)){
										echo "<tr>";
										echo "<td>".$r['date']."</td>";
										echo "<td>".$r['user_name']."</td>";
										echo "<td>".$r['type']."</td>";
										echo "<td>".$r['time']."</td>";
										echo "</tr>";
								}	 
								echo "</table></td>"; 	
						  }
		  		echo "</tr>";
			}
				echo "</table>";
		}
	}
}
?>
	</body>
</html>


<script type="text/javascript">
	$(function(){
		var data_get={};
		$('.slidedown').hide();

		$(document).on("click", "#show_more", function(){
			var project_name = $(this).attr("data-project");
			$(this).parent().parent().next('tr').slideToggle('fast');
		});
	});
</script>